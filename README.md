# Интеллектуальный пульт составителя

## Содержимое

- [Описание задачи](#описание-задачи)
- [Архитектура решения](#архитектура-решения)
- [Метрики](#метрики)
- [Развёртывание](#развёртывание)
- [Расширение команд](#расширение-команд)

## Описание задачи

При работе с беспилотными локомативами присутствуют сценарии когда сенсоры не могут эффективно оценивать происходящее, например при надвиге большого состава, в таких ситуациях нужна помощь составителя поездов.

Составитель должен отдавать **голосовые команды** беспилотному локомотиву.

Команды распознаются специальным пультом составителя с **жёсткими ограничениями** по ресурсам.

Необходимо разработать систему распознавания голосовых команд в соответствии со следующими критериями:
- До 1 ГБ ОЗУ
- ~100, <500мс на обработку аудио
- Защита от случайного нажатия
- Извлечение числовых 

## Архитектура решения

![Архитектура решения]()

Модель VOSK поддерживает адаптацию для добавления новых команд 

## Метрики

| Показатель | значение |
| :-: | :-: |
| F1 взвешенная | :-: |
| WER | :-: |
| Задержка (для 1-й секунды) | 50 мс |
| Потребление ОЗУ | :-: |

Оборудование: 11th Gen Intel(R) Core(TM) i5-11400H @ 2.70GHz

#### Описание выборки

| Всего | 1468 файлов |
| :-: | :-: |
| hr_bot_noise | 80% |
| hr_bot_clear | 80% |
| hr_bot_synt | 80% |
| luga | 50% |

Датасет доступен по [ссылке тут](https://lodmedia.hb.bizmrg.com/case_files/1144817/train_dataset_train_rzhd_pult.zip) [или тут](https://datasets.vniias.ru/tasks/1)

Также данный датасет можно скачать с помощью скрипта `./utils/get_datasets.sh`

## Развёртывание

1. Распакуйте модели в текущую директорию

`./utils/unpack.sh`

2. Установите зависимости

`poetry install`

3. Скачайте датасет (опционально)

`./utils/get_datasets.sh`

4. Используйте!

`python get_submission.py --src {путь до папки с аудио} --dst {путь до папки с будущим результатом}`

Пример:

`python get_submission.py --src ./ESC_DATASET_v1.2/luga/02_11_2023 --dst .`

### Расширение команд

Чтобы адаптировать модель VOSK, посетите [эту страницу](adaptate_vosk/README.md)

Чтобы дообучить модель классификации, можно использовать [блокнот в google-colab]("")
